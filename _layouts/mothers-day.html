---
layout: default
---

<!-- example: http://127.0.0.1:4000/mothers-day?video=QV5pglqKDGQ -->
<div class="content-wrapper">
    <div class="envelope-shake-wrapper">
        <div class="envelope-wrapper">
            <div class="lid one"></div>
            <div class="lid two"></div>
            <div class="envelope"></div>
            <div id="usernameSection" class="stamp" style="display: none">
                <div
                    class="stamp-heart"
                    style="
                        font-size: 2.2rem;
                        margin-bottom: 0.2em;
                        color: #fff;
                        text-shadow: 0 2px 8px #fb7171;
                    "
                >
                    <i class="uil uil-heart-alt"></i>
                </div>
                <h2 class="stamp-title">Enter Username</h2>
                <input
                    type="text"
                    id="usernameInput"
                    class="stamp-input"
                    placeholder="Username"
                />
                <button onclick="fetchUserData()" class="stamp-btn">
                    View Message
                </button>
            </div>
            <div class="letter">
                <!-- Main Content Section (Initially Hidden) -->
                <section
                    id="mainContent"
                    class="wrapper pt-8 pt-md-12"
                    style="
                        display: none;
                        background: linear-gradient(
                            180deg,
                            #fff8f8 0%,
                            #ffffff 100%
                        );
                    "
                >
                    <div class="container pb-19 pb-md-20 text-center">
                        <!-- Decorative elements -->
                        <div
                            class="position-absolute"
                            style="top: 0; left: 5%; opacity: 0.1"
                        >
                            <i
                                class="uil uil-heart"
                                style="font-size: 4rem; color: #ff6b6b"
                            ></i>
                        </div>
                        <div
                            class="position-absolute"
                            style="top: 20%; right: 8%; opacity: 0.1"
                        >
                            <i
                                class="uil uil-flower"
                                style="font-size: 3rem; color: #ff6b6b"
                            ></i>
                        </div>
                        <div
                            class="position-absolute"
                            style="top: 30%; left: 10%; opacity: 0.1"
                        >
                            <i
                                class="uil uil-heart"
                                style="font-size: 3rem; color: #ff6b6b"
                            ></i>
                        </div>

                        <div class="row">
                            <div class="col-md-10 col-xl-8 mx-auto">
                                <div class="post-header">
                                    <div class="mb-4">
                                        <i
                                            class="uil uil-heart-alt"
                                            style="
                                                font-size: 3rem;
                                                color: #ff6b6b;
                                            "
                                        ></i>
                                    </div>
                                    <h1
                                        class="display-1 mb-4"
                                        id="messageTitle"
                                    ></h1>
                                    <!-- <p class="lead mb-5" style="color: #7c7c7c">
                                    A special tribute to celebrate the love and
                                    dedication of mothers everywhere
                                </p> -->
                                    <ul
                                        class="post-meta"
                                        style="
                                            background: rgba(
                                                255,
                                                107,
                                                107,
                                                0.1
                                            );
                                            padding: 1rem;
                                            border-radius: 10px;
                                        "
                                    >
                                        <li class="post-date">
                                            <i class="uil uil-calendar-alt"></i
                                            ><span id="createdDate"></span>
                                        </li>
                                        <li class="post-author">
                                            <i class="uil uil-user"></i
                                            ><span id="studentName"></span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section
                    id="videoSection"
                    class="wrapper"
                    style="display: none"
                >
                    <div class="container pb-14 pb-md-16">
                        <div class="row">
                            <div class="col-lg-10 mx-auto">
                                <div class="blog single mt-n17">
                                    <div
                                        class="card"
                                        style="
                                            border-radius: 15px;
                                            box-shadow: 0 0 40px
                                                rgba(255, 107, 107, 0.1);
                                        "
                                    >
                                        <div
                                            style="
                                                position: relative;
                                                padding-bottom: 56.25%;
                                                height: 0;
                                                overflow: hidden;
                                                border-radius: 15px 15px 0 0;
                                            "
                                        >
                                            <iframe
                                                id="youtubeEmbed"
                                                style="
                                                    position: absolute;
                                                    top: 0;
                                                    left: 0;
                                                    width: 100%;
                                                    height: 100%;
                                                    border: 0;
                                                "
                                                allowfullscreen
                                            >
                                            </iframe>
                                        </div>
                                        <div class="card-body p-5">
                                            <div class="text-center">
                                                <h3 class="h2 mb-4">
                                                    <span
                                                        id="messageTitle"
                                                    ></span>
                                                </h3>
                                                <p
                                                    id="studentMessage"
                                                    class="text-muted"
                                                ></p>
                                                <button
                                                    class="mt-4 mb-3"
                                                    style="
                                                        background: #ffe4e1;
                                                        padding: 1rem 2rem;
                                                        border-radius: 12px;
                                                        font-family: 'Arial',
                                                            sans-serif;
                                                        border: none;
                                                        box-shadow: 0 2px 4px
                                                            rgba(0, 0, 0, 0.1);
                                                        color: #8b4513;
                                                        font-weight: 500;
                                                        transition: all 0.3s
                                                            ease;
                                                        cursor: pointer;
                                                    "
                                                    onmouseover="this.style.background='#FFD1C9'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.15)'"
                                                    onmouseout="this.style.background='#FFE4E1'; this.style.transform='none'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.1)'"
                                                    onclick="copyToClipboard()"
                                                >
                                                    Share this with your friends
                                                    and family!
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
<style>
    /* reference url: https://codepen.io/Coding-Star/pen/WNpbvwB */
    .stamp {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        height: 90%;
        width: auto;
        aspect-ratio: 1 / 1;
        background: radial-gradient(
            circle at 60% 40%,
            #fb7171 80%,
            #ffbdbd 100%
        );
        border-radius: 50%;
        border: 4px dashed #fff8f8;
        box-shadow: 0 0 40px rgba(255, 107, 107, 0.15),
            0 8px 32px 0 rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 100;
        box-sizing: border-box;
        padding: 1.5em 1em;
        overflow: hidden;
        color: #fff;
        text-align: center;
    }

    .stamp-heart {
        margin-bottom: 0.2em;
    }

    .stamp-title {
        font-family: "Montserrat", Arial, sans-serif;
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1em;
        color: #fff;
        letter-spacing: 0.02em;
        text-shadow: 0 2px 8px #fb7171;
    }

    .stamp-input {
        width: 80%;
        max-width: 180px;
        min-width: 0;
        margin-bottom: 1em;
        font-size: 1.1em;
        box-sizing: border-box;
        text-align: center;
        border-radius: 8px;
        padding: 0.7em 1em;
        border: 2px solid #fff8f8;
        background: #fff8f8;
        font-family: "Dancing Script", "Comic Sans MS", cursive, sans-serif;
        color: #fb7171;
        box-shadow: 0 2px 8px rgba(255, 107, 107, 0.08);
        outline: none;
        transition: border 0.2s;
    }

    .stamp-input:focus {
        border: 2px solid #ff6b6b;
    }

    .stamp-btn {
        width: 80%;
        max-width: 180px;
        min-width: 0;
        font-size: 1.1em;
        padding: 0.7em 1em;
        box-sizing: border-box;
        border-radius: 10px;
        background: #ffe4e1;
        color: #8b4513;
        font-family: "Montserrat", Arial, sans-serif;
        font-weight: 600;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
        cursor: pointer;
        transition: all 0.3s;
        margin-bottom: 0.2em;
    }

    .stamp-btn:hover,
    .stamp-btn:focus {
        background: #ffd1c9;
        color: #8b4513;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .envelope-wrapper {
        height: 35vw;
        width: 70%;
        background-color: transparent;
        position: relative;
        display: flex;
        justify-content: center;
        z-index: 0;
        margin: 2rem auto;
        margin-top: 20vw;
        margin-bottom: 20vw;
        transition: margin 0.5s ease-in-out;
    }

    .lid {
        position: absolute;
        height: 0;
        width: 0;
        top: 0;
        left: 0;
        border-right: 35vw solid transparent;
        border-bottom: 17.5vw solid transparent;
        border-left: 35vw solid transparent;
        transform-origin: top;
        transition: transform 0.4s ease-in-out;
    }

    /* Lid when closed */
    .lid.one {
        border-top: 17.5vw solid #ffe4e1;
        transform: rotateX(0deg);
        z-index: 3;
        transition-delay: 0.4s;
    }

    /* Lid when opened */
    .lid.two {
        border-top: 17.5vw solid #ffd1c9;
        transform: rotateX(90deg);
        z-index: 1;
        transition-delay: 0.2s;
    }

    .envelope {
        position: absolute;
        height: 0;
        width: 0;
        top: 0;
        left: 0;
        border-top: 17.5vw solid transparent;
        border-right: 35vw solid #ffe4e1;
        border-bottom: 17.5vw solid #ffe4e1;
        border-left: 35vw solid #ffe4e1;
        z-index: 3;
        filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.1));
    }

    .letter {
        position: absolute;
        top: 1vw;
        width: calc(70vw - 10px);
        height: 33vw;
        background-color: white;
        border-radius: 15px;
        z-index: 2;
        transition: all 0.5s ease-in-out;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        overflow: visible;
        overflow-y: scroll;
        margin-left: 1.5vw;
    }

    .envelope-wrapper.can-open:hover .lid.one {
        transform: rotateX(90deg);
        transition-delay: 0s;
    }

    .envelope-wrapper.can-open:hover .lid.two {
        transform: rotateX(180deg);
        transition-delay: 0.2s;
    }

    .envelope-wrapper.can-open:hover {
        margin-top: 60vw;
    }

    .envelope-wrapper.can-open:hover .letter {
        transform: translateY(-50vw);
        height: calc(
            50vw + 33vw
        ); /* 50vw is the height of the envelope, 33vw is the height of the letter, not 35vw to prevent overflow from the bottom of the envelope*/
        transition-delay: 0.5s;
        padding-bottom: 23vw;
    }

    @keyframes shake {
        0% {
            transform: rotate(0deg);
        }
        20% {
            transform: rotate(4deg);
        }
        40% {
            transform: rotate(-4deg);
        }
        60% {
            transform: rotate(4deg);
        }
        80% {
            transform: rotate(-4deg);
        }
        100% {
            transform: rotate(0deg);
        }
    }

    .envelope-shake-wrapper.shake {
        animation: shake 0.5s;
        animation-iteration-count: 2;
    }

    @media (max-width: 1024px) {
        .envelope-wrapper {
            width: 80%;
            height: 40vw;
        }

        .lid {
            border-right: 40vw solid transparent;
            border-bottom: 20vw solid transparent;
            border-left: 40vw solid transparent;
        }

        .lid.one {
            border-top: 20vw solid #ffe4e1;
        }

        .lid.two {
            border-top: 20vw solid #ffd1c9;
        }

        .envelope {
            border-top: 20vw solid transparent;
            border-right: 40vw solid #ffe4e1;
            border-bottom: 20vw solid #ffe4e1;
            border-left: 40vw solid #ffe4e1;
        }

        .letter {
            width: calc(80vw - 10px);
            height: calc(40vw - 10px);
        }

        .envelope-wrapper.can-open:hover {
            margin-top: 60vw;
        }

        .envelope-wrapper.can-open:hover .letter {
            transform: translateY(-50vw);
            height: calc(50vw + 37vw);
            transition-delay: 0.5s;
            padding-bottom: 30vw;
        }
    }

    @media (max-width: 768px) {
        .envelope-wrapper {
            width: 90%;
            height: 50vw;
        }

        .lid {
            border-right: 45vw solid transparent;
            border-bottom: 25vw solid transparent;
            border-left: 45vw solid transparent;
        }

        .lid.one {
            border-top: 25vw solid #ffe4e1;
        }

        .lid.two {
            border-top: 25vw solid #ffd1c9;
        }

        .envelope {
            border-top: 25vw solid transparent;
            border-right: 45vw solid #ffe4e1;
            border-bottom: 25vw solid #ffe4e1;
            border-left: 45vw solid #ffe4e1;
        }

        .letter {
            width: calc(90vw - 30px);
            height: calc(50vw - 10px);
        }

        .envelope-wrapper.can-open:hover {
            margin-top: 60vh;
        }

        .envelope-wrapper.can-open:hover .letter {
            transform: translateY(-50vh);
            height: calc(50vh + 43vw);
            transition-delay: 0.5s;
            padding-bottom: 23vw;
        }
    }
</style>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get("username");

    if (username) {
        fetchUserData(username);
    } else {
        document.getElementById("usernameSection").style.display = "block";
    }

    async function fetchUserData(u) {
        let username;
        if (!u) {
            username = document.getElementById("usernameInput").value;
        } else {
            username = u;
        }
        if (!username) {
            alert("Please enter a username");
            return;
        }

        try {
            const response = await fetch(
                `http://localhost:3000/api/MothersDayProjects/getStudentProjectsByUserName?username=${encodeURIComponent(
                    username
                )}`
            );
            if (!response.ok) {
                throw new Error("Failed to fetch data");
            }
            const res = await response.json();
            const data = res[0];

            document.getElementById(
                "youtubeEmbed"
            ).src = `https://www.youtube.com/embed/${data.videoId}`;
            document.getElementById("studentName").textContent = username;
            document.getElementById("messageTitle").textContent =
                "Mom, Happy Mother's day! from " + username;
            document.getElementById("studentMessage").textContent =
                data.message;

            const dateValue =
                data.createdAt ||
                data.created_at ||
                data.createdDate ||
                data.created ||
                new Date().toISOString();

            document.getElementById("createdDate").textContent = new Date(
                dateValue
            ).toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
            });

            // document.getElementById("usernameSection").style.display = "none";
            document.getElementById("mainContent").style.display = "flex";
            document.getElementById("videoSection").style.display = "block";
            document.getElementById("usernameSection").style.display = "none";
            // Enable envelope opening on hover
            document
                .querySelector(".envelope-wrapper")
                .classList.add("can-open");
        } catch (error) {
            alert("Error fetching data. Please try again.");
            console.error("Error:", error);
        }
    }

    function copyToClipboard() {
        const text =
            window.location.href +
            "?username=" +
            document.getElementById("usernameInput").value;
        navigator.clipboard.writeText(text);
        alert("Copied to clipboard");
    }

    function triggerEnvelopeShake() {
        const shakeWrapper = document.querySelector(".envelope-shake-wrapper");
        const env = document.querySelector(".envelope-wrapper");
        if (!env.classList.contains("can-open")) {
            shakeWrapper.classList.add("shake");
            setTimeout(() => {
                shakeWrapper.classList.remove("shake");
            }, 1000); // slightly longer than animation
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        const env = document.querySelector(".envelope-wrapper");
        // Only trigger shake on desktop (width > 768px)
        if (window.innerWidth > 768) {
            env.addEventListener("mouseenter", function (e) {
                if (!env.classList.contains("can-open")) {
                    triggerEnvelopeShake();
                }
            });
        }
    });
</script>
